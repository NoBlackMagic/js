<!--
Javascript - Objects
====================

An object is a collection of key:value items.

- [MDN Objects](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)

-->
<!DOCTYPE html>
<html>
<head>
    <meta charset=utf-8 />
    <title>JS007 - Objects</title>
</head>
<body>
    
    <script>
    
    /**
     * Create an object it's just a matter of declaring it's properties.
     * -- a property can be of whathever type you need it to be!
     */
    
    var user = {
        name: 'Marco',
        surname: 'Pegoraro',
        age: 32
    };
    
    /**
     * There are 2 ways to refer to an object's proerty
     */
    
    console.log('user name:', user.name);
    console.log('user surname:', user['surname']);
    
    /**
     * The second syntax let us to store the key we want to read into
     * a dedicated variable.
     * -- this method is extremely useful when dealing with real life problems!
     */
    
    var key = 'age';
    
    console.log('user "', key, '" :', user[key]);
    
    /**
     * We can write on an existing property
     */
    
    user.age = 35;
    
    console.log('new user age:', user.age);
    
    /**
     * Or we can create new properties on the fly
     */
    
    user.hobbies = ['airplanes', 'hiking', 'biking', 'programming'];
    
    console.log('user with hobbies', user);
    
    /**
     * It is also possible to remove an existing property
     */
    
    delete(user.age);
    
    console.log('user without age', user);
    
    /**
     * It is possible to test if an object define a particular key
     */
    
    console.log('user has a "name" property?', 'name' in user);
    console.log('user has a "foo" property?', 'foo' in user);
    
    if ('name' in user === true) {
        console.log('user has "name" property');
    }
    
    if ('foo' in user === false) {
        console.log('user has NOT "foo" property');
    }
    
    /**
     * It is possible to get an array of an object's keys:
     */
    
    console.log('user\'s keys:', Object.keys(user));
    
    /**
     * It is not that simple to make a copy of an object!
     */
    
    var ob1 = { name:'foo' };
    var ob2 = ob1; // this is NOT a copy, it's just a reference!
    
    ob1.name = 'changed in value';
    
    console.log('"ob2" it\'s just a reference to "ob1"', ob2);
    console.log('ob1 === ob2', ob1 === ob2);
    
    /**
     * Two objects with the same content are not really equals!
     */
    
    var ob1 = { name:'foo' };
    var ob2 = { name:'foo' };
    
    console.log('ob1 === ob2', ob1 === ob2);
    
    
    /**
     * CLONE, COPY, EXTEND
     * Javascript is a reference based language which mean than when you
     * do something like `var ob2 = ob1` you do not make a copy but you
     * just create a new "link" to an existing memory allocation.
     *
     * Many libraries such jQuery, Underscore, etc provide some "extend()"
     * methods that are useful to clone objects.
     *
     * Here there is a vary simple implementation of an "extend()" utility
     * function which handle only plain objects (no array, no dates).
     *
     * The basic concept is that a new empty object is created and then filled
     * with all the properties from another object.
     */
    
    function extend (obj) {
        var args = [].slice.call(arguments, 1);
        args.forEach(function (source) {
            if (source) {
                for (var prop in source) {
                    obj[prop] = source[prop];
                }
            }
        });
        return obj;
    }
    
    var ob1 = { name:'foo' };
    var ob2 = extend({}, ob1);
    
    console.log('ob1 === ob2', ob1 === ob2);
    
    </script>
    
</body>
</html>
