<!--
Javascript DOM
==============

-->
<!DOCTYPE html>
<html>
<head>
    <meta charset=utf-8 />
    <title>JS100 - Arrays</title>
</head>
<body>
    
    <!-- inline script -->
    <script>
    
    // this is just a normal array of items
    var fruits = ['apple', 'orange', 'mango', 'banana', 'blackberry', 'avocado'];
    
    // this is a standard Javascript collection
    // -- a database
    var cast = [{
        name: 'Luke Skywalker',
        side: 'good',
        serie: ['original']
    }, {
        name: 'Darth Vader',
        side: 'evil',
        serie: ['original', 'new']
    }, {
        name: 'Ian Solo',
        side: 'good',
        serie: ['original']
    }, {
        name: 'Obi One Kenobi',
        side: 'good',
        serie: ['original', 'new']
    }, {
        name: 'Leia Organa',
        side: 'good',
        serie: ['original']
    }, {
        name: 'Jabba The Hutt',
        side: 'evil',
        serie: ['original']
    }, {
        name: 'Padme Amidala',
        side: 'good',
        serie: ['new']
    }, {
        name: 'Anakin Skywalker',
        side: 'good',
        serie: ['new']
    }];
    
    
    
     
    /**
     * Walk The Array
     */ 
    
    console.group('Walk the Array');
    
    // classich FOR cycle
    for (i=0; i<fruits.length; i++) {
        console.log(i, fruits[i]);
    }
    
    // - [MDN for ... in](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...in)
    for (index in fruits) {
        console.log(index, fruits[index]);
    }
    
    // - [MDN forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)
    fruits.forEach(function(item, index) {
        console.log(index, item);
    });
    
    // extract starWars characters:
    // -- take a cast item property and fill it into a brand new array
    var castNames = [];
    cast.forEach(function(item) {
        castNames.push(item.name);
    });
    console.log('cast names:', castNames);
    
    // if you walk an array of objects then you **get a reference** to the 
    // object itself in the callback method.
    // -- so you can apply changes to the original list by editing the single item!
    
    console.log('cast\'s item keys (before edit):', Object.keys(cast[0]));
    
    cast.forEach(function(item) {
        if (item.side === 'good') {
            item.isGood = true;
        } else {
            item.isGood = false;
        }
        item.isEvil = !item.isGood;
    });
    
    console.log('cast\'s item keys (after edit):', Object.keys(cast[0]));
    
    console.groupEnd();
    
    
    
    
    
    /**
     * Sort An Array
     * 
     * NOTE: sorting an array will work on the array itself,
     *       it DOES NOT COPY the array!
     *
     * - [MDN sort](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)
     */
    
    console.group('Sort The Array');
    
    // quick sort an array of strings or numbers:
    fruits.sort();
    console.log('sorted fruits:', fruits);
    
    // custom sort function applied to an array of strings:
    castNames.sort(function(a, b) {
        // get just the lower cased first letter for each item
        a = a.substr(0,1).toLowerCase();
        b = b.substr(0,1).toLowerCase();
        
        if (a < b) {
            return -1;
        }
        if (a > b) {
            return 1;
        }
        return 0;
    });
    
    console.log('sorted cast names:', castNames);
     
    // sort a complex object
    cast.sort(function(a, b) {
        // get just the lower cased first letter for EACH ITEM'S NAME PROPERTY
        a = a.name.substr(0,1).toLowerCase();
        b = b.name.substr(0,1).toLowerCase();
        
        if (a < b) {
            return -1;
        }
        if (a > b) {
            return 1;
        }
        return 0;
    });
     
    console.groupEnd();
     
     
     
     
    
     
     
    /**
     * Filter An Array
     * 
     * to filter an array means to create a new array which contains a subset
     * of the original array items.
     *
     * - [MDN array.filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)
     */
    
    console.group('Filter An Array');
    
    // cycle FOR method:
    // we cycle through an array and if a condition verifies we add that
    // item to a different array.
    filteredFruits = [];
    for (i = 0; i < fruits.length; i++) {
        var lcFirstLetter = fruits[i].substr(0, 1).toLowerCase();
        if (lcFirstLetter === 'a') {
            filteredFruits.push(fruits[i]);
        }
    }
    
    console.log('fruits by "a":', filteredFruits);
    
    
    // array.filter() API
    //
    // we apply a JS method to the original array, the callback run for
    // each array item (as in forEach) but she must return a boolean
    // meaning if the actual item should be considered into the new subset.
    //
    // array.filter() produces the brand new and filtered array
    //
    filteredFruits = fruits.filter(function(item) {
        var lcFirstLetter = item.substr(0, 1).toLowerCase();
        return lcFirstLetter === 'b';
    });
    
    console.log('fruits by "b":', filteredFruits);
    
    
    // NOTE: referecens are references!
    var goodCharacters = cast.filter(function(item) {
        return item.isGood;
    });
    var goodAnakin = goodCharacters.filter(function(item) {
        return item.name.toLowerCase().indexOf('anakin') !== -1;
    })[0];
    
    var normalAnakin = cast.filter(function(item) {
        return item.name.toLowerCase().indexOf('anakin') !== -1;
    })[0];
    
    console.log('is "goodAnakin" the same of "normalAnakin"?', goodAnakin === normalAnakin);
    
    console.groupEnd();
    
    
    
    
    
    
    /**
     * Every / Some
     *
     * - [MDN every](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/every)
     * - [MDN some](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/some)
     */
    
    console.group('Every / Some');
    
    // do all StarWars characters have name and surname?
    answer = cast.every(function(item) {
        return item.name.split(' ').length > 1;
    });
    
    console.log('do all StarWars characters have name and surname?', answer);
    
    // I can apply the same callback to many tests!
    
    function onBothSerie(item) {
        return item.serie.length > 1;
    }
    
    console.log('do ALL StarWars character act in both original and new serie?', cast.every(onBothSerie));
    console.log('do AT LEAST ONE StarWars character act in both original and new serie?', cast.some(onBothSerie));
    
    console.groupEnd();
    
    
    
    
    
    /**
     * EXERCISES:
     *
     * - list all good characters which act in the original serie
     * - list all good characters which act ONLY in the original serie
     * - list all good characters which act in BOTH the original and newserie
     * - do at least one character name begin with the same letter of the surname?
     */
    
    </script>
    
</body>
</html>
